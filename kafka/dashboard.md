# 📂 목록

- 🛠️ [Kafka 환경 구축](./kafka_system_development.md)
- 🚀 [ClickHouse와 PostgreSQL 비교 및 테이블 설계](./clickhouse_postgresql.md)
- 📊 [대시보드 성능 테스트](./dashboard.md)

# 📊 대시보드 성능 테스트

ClickHouse와 PostgreSQL 중 ClickHouse를 중심으로,  
**적재한 데이터를 기반으로 대시보드 조회 성능을 테스트**해보았습니다.

---

## ✅ 테스트 개요

- **테스트 건수**

  - 1만 건
  - 10만 건
  - 100만 건

- **대시보드 통계 항목**

  | 항목                                             | 설명                     |
  | ------------------------------------------------ | ------------------------ |
  | ① 상위 10개 Request 타입 및 엔드포인트별 요청 수 | → Bar Chart              |
  | ② 전체 요청 수 (기간 기준)                       | → 상단 중앙에 큰 숫자    |
  | ③ 시간대별 요청 분포 (시간 단위)                 | → Heatmap 또는 Histogram |

> 📌 현재는 데이터가 충분히 쌓이지 않아서 보류 중입니다.  

---

## ⚠️ 직접 구축하며 경험한 ClickHouse의 단점 (실전 적용 기준)

ClickHouse는 조회 성능은 매우 우수하지만, **쓰기 처리**에서 다음과 같은 제한이 있었습니다.

## ❗ 실시간 쓰기 성능 한계

- Kafka에서 초당 다량의 데이터가 유입되면  
  → ClickHouse 내부의 **백그라운드 병합 작업(Merge)**이 지연될 수 있습니다.

- 이로 인해:
  - 데이터는 정상적으로 삽입되지만,
  - 대시보드에는 **2~5초 정도 지연되어 반영**될 수 있습니다.

## 💡 원인 요약

| 항목      | 설명                                                                                |
| --------- | ----------------------------------------------------------------------------------- |
| 병합 구조 | ClickHouse는 데이터 삽입 시, 여러 파일(Part)을 나눠 저장한 후, 병합(Merge)하여 정리 |
| 병목 시점 | 병합 작업이 지연되면, **쿼리 성능이나 데이터 반영 시간**에 영향 발생                |
| 해결책    | Insert 빈도 조절, Buffer Table 도입, Kafka Engine 활용 등을 고려                    |

---

> 📌 실시간 집계가 중요한 경우에는  
> **Kafka → Buffer → ClickHouse** 구성 또는  
> **ClickHouse Kafka 엔진**을 통한 비동기 처리를 고려해볼 필요가 있습니다.
